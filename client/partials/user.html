<div ng-if="!user">This user does not exist</div>


<div class="container content" ng-if="user">

    <div class="row">

        <!-- LOCAL INFORMATION -->
        <div class="col-sm-12 col-md-6 col-offset-md-3" ng-if="user.local.email">
            <div class="well">
                <h3><span class="fa fa-user"></span> Local</h3>

                    <p>
                        <strong>name</strong>: {{ user.local.name }}<br>
                        <strong>email</strong>: {{ user.local.email }}
                    </p>

            </div>
        </div>

        <!-- FACEBOOK INFORMATION -->
        <div class="col-sm-12 col-md-6 col-offset-md-3" ng-if="user.facebook.token">
            <div class="well">
                <h3 class="text-primary"><span class="fa fa-facebook"></span> Facebook</h3>

                    <p >
                        <strong>email</strong>: {{ user.facebook.email }}<br>
                        <strong>name</strong>: {{ user.facebook.name }}<br>
                    </p>
            </div>
        </div>

        <!-- GOOGLE INFORMATION -->
        <div class="col-sm-12 col-md-6 col-offset-md-3" ng-if="user.google.token">
            <div class="well">
                <h3 class="text-danger"><span class="fa fa-google-plus"></span> Google+</h3>

                    <p>
                        <strong>email</strong>: {{ user.google.email }}<br>
                        <strong>name</strong>: {{ user.google.name }}
                    </p>

            

            </div>
        </div>

    </div>

    <div class="row">
                
        <div ng-if="user.items">
            <div ng-repeat="item in user.items" class="col-xs-12 col-sm-4 col-md-3 col-lg-2 itemContainer">
                <div class="item">

                    <div class="row">
                        <div class="col imageContainer">
                            <a href="/items/{{item._id}}"><img src="/images/none.jpg" class="itemImage"></a><br>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col itemName">
                            <a href="/items/{{item._id}}">{{item.name}}</a><br>
                            <a href="/newExchange/{{item.owner.username}}/{{item._id}}">Make an offer</a>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-xs-4">
                            <a href="/viewInfo/{{item._id}}"><span class="glyphicon glyphicon-info-sign"></span></a>    
                        </div>
                        <div class="col-xs-4">
                            <img src="/images/btn.png" class="itemButton">
                        </div>
                        <div class="col-xs-4">
                            <img src="/images/btn.png" class="itemButton">
                        </div>
                    </div>
                
                </div><!-- item -->
            </div>    
        </div>
    </div>
</div>

<div id="exchangeFooter" class="row">

    <div class="col-xs-6" id="messenger">

        <!-- <div class="row"><h5>Messages</h5></div>

        <div id="displayMessages">

            <div class="row message" ng-repeat="messageToDisplay in exchange.conversation.messages  | orderBy : '-timestamp'">

                    <div class="col-xs-5 messageInfo" ng-if="messageToDisplay.timestamp">[{{ UtilityService.formatTimestamp(messageToDisplay.timestamp, 'short') }}] <b>{{ UtilityService.getUserName( messageToDisplay.sender ) }}:</b> </div>
                    <div class="col-xs-7 messageContent">{{ messageToDisplay.content }}</div>  

            </div>

        </div>
    

        <div id="messageForm" class="row">
            <input type="text" id="messageInput" placeholder="Type a message" 
            ng-model="message" ng-keydown="$event.keyCode === 13 && sendMessage()" />

            <button class="btn" id="messageButton" ng-click="sendMessage( )">Send</button>
        </div> -->

    </div>


    <div class="col-xs-6" id="userInfo" ng-if="user">

        <div class="row"><h5>{{ UtilityService.getUserName( user ) }}'s details</h5></div>
        Feedback score: <b>{{ user.feedback.score }}%</b> ({{ user.feedback.count }} completed exchanges)
        
        <br><br>

        <div id="displayFeedback">

            <div class="row feedback" ng-repeat="feedbackToDisplay in feedbacks  | orderBy : '-timestamp'">

                <div class="col-xs-5 messageInfo" ng-if="feedbackToDisplay.timestamp">[{{ UtilityService.formatTimestamp(feedbackToDisplay.timestamp, 'short') }}] <b>{{ UtilityService.getUserName( feedbackToDisplay.author ) }}:</b> </div>
                <div class="col-xs-7 messageContent">{{ feedbackToDisplay.rating }} - {{ feedbackToDisplay.comment }}</div>  

            </div>

        </div>

    </div>

</div>
